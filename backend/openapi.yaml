openapi: 3.0.0
paths:
  /shanda/auth/webhook:
    post:
      operationId: ClerkAuthController_handleClerkWebhook
      parameters:
        - name: svix-id
          required: true
          in: header
          schema:
            type: string
        - name: svix-timestamp
          required: true
          in: header
          schema:
            type: string
        - name: svix-signature
          required: true
          in: header
          schema:
            type: string
      responses:
        '201':
          description: ''
      summary: Clerk webhook handler
      tags: &ref_0
        - auth
  /shanda/auth/me:
    get:
      operationId: ClerkAuthController_getCurrentUser
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security:
        - bearer: []
      summary: Get current user profile
      tags: *ref_0
  /shanda/auth/profile:
    put:
      operationId: ClerkAuthController_updateProfile
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileDto'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security:
        - bearer: []
      summary: Update user profile
      tags: *ref_0
  /shanda/auth/roles:
    put:
      operationId: ClerkAuthController_updateRoles
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security:
        - bearer: []
      summary: Update user roles
      tags: *ref_0
  /shanda/vehicles:
    get:
      operationId: VehiclesController_findAll
      parameters:
        - name: page
          required: false
          in: query
          description: 'Page number (default: 1)'
          schema:
            minimum: 1
            default: 1
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: 'Items per page (default: 20, max: 100)'
          schema:
            minimum: 1
            maximum: 100
            default: 20
            example: 20
            type: number
      responses:
        '200':
          description: Paginated list of vehicles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/VehicleResponseDto'
      security: &ref_1
        - bearer: []
      summary: Get all vehicles for current user
      tags: &ref_2
        - vehicles
    post:
      operationId: VehiclesController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateVehicleDto'
      responses:
        '201':
          description: Vehicle created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
      security: *ref_1
      summary: Create a new vehicle
      tags: *ref_2
  /shanda/vehicles/{id}:
    get:
      operationId: VehiclesController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Vehicle details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
      security: *ref_1
      summary: Get a specific vehicle by ID
      tags: *ref_2
    put:
      operationId: VehiclesController_update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateVehicleDto'
      responses:
        '200':
          description: Vehicle updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
      security: *ref_1
      summary: Update a vehicle
      tags: *ref_2
    delete:
      operationId: VehiclesController_delete
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
      security: *ref_1
      summary: Delete a vehicle
      tags: *ref_2
  /shanda/vehicles/{id}/mileage:
    patch:
      operationId: VehiclesController_updateMileage
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMileageDto'
      responses:
        '200':
          description: Mileage updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
      security: *ref_1
      summary: Update vehicle mileage
      tags: *ref_2
  /shanda/vehicles/{id}/images:
    post:
      operationId: VehiclesController_uploadImages
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Images uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
        '201':
          description: ''
      security: *ref_1
      summary: Upload images for a vehicle
      tags: *ref_2
    delete:
      operationId: VehiclesController_deleteImage
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Image deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VehicleResponseDto'
      security: *ref_1
      summary: Delete an image from a vehicle
      tags: *ref_2
  /shanda/requests/public/recent:
    get:
      operationId: RequestsController_findPublicRecent
      parameters: []
      responses:
        '200':
          description: Return recent public requests.
      summary: Get recent public service requests (no auth required)
      tags: &ref_3
        - requests
  /shanda/requests:
    get:
      operationId: RequestsController_findAll
      parameters:
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            minimum: 1
            default: 1
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            minimum: 1
            maximum: 100
            default: 20
            example: 20
            type: number
        - name: status
          required: false
          in: query
          description: Filter by status (open, quoted, in_progress, completed, cancelled)
          schema:
            type: string
        - name: sort
          required: false
          in: query
          description: Sort order
          schema:
            default: newest
            type: string
            enum:
              - newest
              - oldest
              - urgency
      responses:
        '200':
          description: Paginated list of service requests
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RequestResponseDto'
      security:
        - bearer: []
      summary: Get all service requests (owners see theirs, providers see all open)
      tags: *ref_3
    post:
      operationId: RequestsController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRequestDto'
      responses:
        '201':
          description: Service request created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestResponseDto'
      security:
        - bearer: []
      summary: Create a new service request
      tags: *ref_3
  /shanda/requests/{id}:
    get:
      operationId: RequestsController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Service request details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestResponseDto'
        '404':
          description: Request not found.
      security:
        - bearer: []
      summary: Get a specific service request by ID
      tags: *ref_3
    put:
      operationId: RequestsController_update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRequestDto'
      responses:
        '200':
          description: Service request updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestResponseDto'
        '404':
          description: Request not found.
      security:
        - bearer: []
      summary: Update a service request
      tags: *ref_3
  /shanda/requests/{id}/images:
    post:
      operationId: RequestsController_uploadImages
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Images uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestResponseDto'
        '201':
          description: ''
      security:
        - bearer: []
      summary: Upload images for a service request
      tags: *ref_3
    delete:
      operationId: RequestsController_deleteImage
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Image deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestResponseDto'
      security:
        - bearer: []
      summary: Delete an image from a service request
      tags: *ref_3
  /shanda/quotes/request/{requestId}:
    get:
      operationId: QuotesController_findByRequest
      parameters:
        - name: requestId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/QuoteEntity'
      security: &ref_4
        - bearer: []
      summary: Get all quotes for a service request
      tags: &ref_5
        - quotes
  /shanda/quotes:
    post:
      operationId: QuotesController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateQuoteDto'
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuoteEntity'
      security: *ref_4
      summary: Create a new quote (active providers only)
      tags: *ref_5
  /shanda/quotes/{id}/accept:
    post:
      operationId: QuotesController_accept
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '201':
          description: ''
      security: *ref_4
      summary: Accept a quote (creates a job)
      tags: *ref_5
  /shanda/quotes/{id}/reject:
    post:
      operationId: QuotesController_reject
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '201':
          description: ''
      security: *ref_4
      summary: Reject a quote
      tags: *ref_5
  /shanda/notifications:
    get:
      operationId: NotificationsController_findAll
      parameters: []
      responses:
        '200':
          description: ''
      security: &ref_6
        - bearer: []
      summary: Get all notifications for current user
      tags: &ref_7
        - notifications
  /shanda/notifications/unread-count:
    get:
      operationId: NotificationsController_getUnreadCount
      parameters: []
      responses:
        '200':
          description: ''
      security: *ref_6
      summary: Get unread notification count
      tags: *ref_7
  /shanda/notifications/{id}/read:
    put:
      operationId: NotificationsController_markAsRead
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
      security: *ref_6
      summary: Mark notification as read
      tags: *ref_7
  /shanda/notifications/read-all:
    put:
      operationId: NotificationsController_markAllAsRead
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security: *ref_6
      summary: Mark all notifications as read
      tags: *ref_7
  /shanda/jobs:
    get:
      operationId: JobsController_findAll
      parameters:
        - name: page
          required: false
          in: query
          description: 'Page number (default: 1)'
          schema:
            minimum: 1
            default: 1
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: 'Items per page (default: 20, max: 100)'
          schema:
            minimum: 1
            maximum: 100
            default: 20
            example: 20
            type: number
      responses:
        '200':
          description: Paginated list of jobs
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobResponseDto'
      security: &ref_8
        - bearer: []
      summary: Get all jobs (owners see theirs, providers see theirs)
      tags: &ref_9
        - jobs
  /shanda/jobs/{id}:
    get:
      operationId: JobsController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Job details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResponseDto'
        '403':
          description: Forbidden.
        '404':
          description: Job not found.
      security: *ref_8
      summary: Get a specific job by ID
      tags: *ref_9
  /shanda/jobs/{id}/status:
    put:
      operationId: JobsController_updateStatus
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateJobStatusDto'
      responses:
        '200':
          description: Job status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResponseDto'
        '403':
          description: Forbidden.
        '404':
          description: Job not found.
      security: *ref_8
      summary: Update job status (providers only)
      tags: *ref_9
  /shanda/providers/public/featured:
    get:
      operationId: ProvidersController_findFeatured
      parameters: []
      responses:
        '200':
          description: Return featured providers.
      summary: Get featured providers (no auth required)
      tags: &ref_10
        - providers
  /shanda/providers:
    get:
      operationId: ProvidersController_findAll
      parameters:
        - name: serviceType
          required: false
          in: query
          schema:
            type: string
        - name: mobileService
          required: false
          in: query
          schema:
            type: boolean
        - name: shopService
          required: false
          in: query
          schema:
            type: boolean
        - name: minRating
          required: false
          in: query
          schema:
            type: number
        - name: limit
          required: false
          in: query
          schema:
            type: number
      responses:
        '200':
          description: ''
      summary: Get all providers with optional filters
      tags: *ref_10
  /shanda/providers/{id}:
    get:
      operationId: ProvidersController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
      summary: Get provider by ID with full profile
      tags: *ref_10
  /shanda/providers/profile:
    put:
      operationId: ProvidersController_updateProfile
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProviderProfileDto'
      responses:
        '200':
          description: ''
      security:
        - bearer: []
      summary: Update provider profile
      tags: *ref_10
  /shanda/providers/onboarding/status:
    get:
      operationId: ProvidersController_getOnboardingStatus
      parameters: []
      responses:
        '200':
          description: ''
      security:
        - bearer: []
      summary: Get provider onboarding status and checklist
      tags: *ref_10
  /shanda/providers/onboarding/complete:
    post:
      operationId: ProvidersController_completeOnboarding
      parameters: []
      responses:
        '201':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security:
        - bearer: []
      summary: Complete provider onboarding
      tags: *ref_10
  /shanda/providers/onboarding/start:
    put:
      operationId: ProvidersController_startOnboarding
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      security:
        - bearer: []
      summary: Start provider onboarding (NONE â†’ DRAFT)
      tags: *ref_10
  /shanda/services:
    get:
      operationId: ServicesController_findAll
      parameters: []
      responses:
        '200':
          description: ''
      summary: Get all active services
      tags: &ref_11
        - services
  /shanda/services/popular:
    get:
      operationId: ServicesController_findPopular
      parameters: []
      responses:
        '200':
          description: ''
      summary: Get popular services for dashboard
      tags: *ref_11
  /shanda/services/{id}:
    get:
      operationId: ServicesController_findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      summary: Get service by ID
      tags: *ref_11
  /shanda/activities:
    get:
      operationId: ActivitiesController_findAll
      parameters:
        - name: limit
          required: false
          in: query
          schema:
            type: number
      responses:
        '200':
          description: ''
      security:
        - bearer: []
      summary: Get activity timeline for current user
      tags:
        - activities
  /shanda/vehicles/{vehicleId}/maintenance:
    get:
      operationId: MaintenanceController_findAll
      parameters:
        - name: vehicleId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: List of maintenance records
      security: &ref_12
        - bearer: []
      summary: Get maintenance history for a vehicle
      tags: &ref_13
        - maintenance
    post:
      operationId: MaintenanceController_create
      parameters:
        - name: vehicleId
          required: true
          in: path
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMaintenanceRecordDto'
      responses:
        '201':
          description: Maintenance record created successfully
      security: *ref_12
      summary: Add a maintenance record to a vehicle
      tags: *ref_13
  /shanda/maintenance/{id}:
    delete:
      operationId: MaintenanceController_delete
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: Maintenance record deleted successfully
      security: *ref_12
      summary: Delete a maintenance record
      tags: *ref_13
  /shanda/messages/conversations:
    get:
      operationId: MessagesController_getConversations
      parameters: []
      responses:
        '200':
          description: ''
      security: &ref_14
        - bearer: []
      summary: Get all conversations for the authenticated user
      tags: &ref_15
        - messages
  /shanda/messages/conversations/{jobId}:
    get:
      operationId: MessagesController_getConversation
      parameters:
        - name: jobId
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
      security: *ref_14
      summary: Get messages for a specific job conversation
      tags: *ref_15
  /shanda/messages:
    post:
      operationId: MessagesController_sendMessage
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateMessageDto'
      responses:
        '201':
          description: ''
      security: *ref_14
      summary: Send a message in a conversation
      tags: *ref_15
  /shanda/messages/conversations/{conversationId}/read:
    post:
      operationId: MessagesController_markAsRead
      parameters:
        - name: conversationId
          required: true
          in: path
          schema:
            type: string
      responses:
        '201':
          description: ''
      security: *ref_14
      summary: Mark all messages in a conversation as read
      tags: *ref_15
  /shanda/parts:
    post:
      operationId: PartsController_create
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePartDto'
      responses:
        '201':
          description: Part created successfully
      security: &ref_16
        - bearer: []
      summary: Add a part to inventory
      tags: &ref_17
        - Parts
  /shanda/parts/my-inventory:
    get:
      operationId: PartsController_getMyInventory
      parameters: []
      responses:
        '200':
          description: ''
      security: *ref_16
      summary: Get provider inventory
      tags: *ref_17
  /shanda/parts/{id}:
    delete:
      operationId: PartsController_remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
      responses:
        '200':
          description: ''
      security: *ref_16
      summary: Remove a part
      tags: *ref_17
  /shanda/health:
    get:
      operationId: HealthController_check
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
      summary: Health check endpoint
      tags:
        - health
  /shanda/platform/stats:
    get:
      operationId: PlatformController_getStats
      parameters: []
      responses:
        '200':
          description: ''
      security:
        - bearer: []
      summary: Get platform statistics (Admin only)
      tags: &ref_18
        - platform
  /shanda/platform/activity:
    get:
      operationId: PlatformController_getActivity
      parameters: []
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
      security:
        - bearer: []
      summary: Get platform activity feed (Admin only)
      tags: *ref_18
  /shanda/platform/settings:
    get:
      operationId: PlatformController_getSettings
      parameters: []
      responses:
        '200':
          description: ''
      summary: Get platform settings (public)
      tags: *ref_18
info:
  title: Shanda Automotive API
  description: Marketplace connecting vehicle owners with service providers
  version: '1.0'
  contact: {}
tags: []
servers:
  - url: http://localhost:4201
    description: Local Development
  - url: https://api.shanda.com
    description: Production
components:
  securitySchemes:
    bearer:
      scheme: bearer
      bearerFormat: JWT
      type: http
  schemas:
    UpdateProfileDto:
      type: object
      properties:
        name:
          type: string
        phoneNumber:
          type: string
        address:
          type: string
        city:
          type: string
        state:
          type: string
        zipCode:
          type: string
        avatarUrl:
          type: string
        bio:
          type: string
        businessName:
          type: string
        serviceTypes:
          type: array
          items:
            type: string
        yearsInBusiness:
          type: number
        shopAddress:
          type: string
        shopCity:
          type: string
        shopState:
          type: string
        shopZipCode:
          type: string
        serviceArea:
          type: array
          items:
            type: string
        isMobileService:
          type: boolean
        isShopService:
          type: boolean
        hourlyRate:
          type: number
        website:
          type: string
        onboardingComplete:
          type: boolean
    VehicleResponseDto:
      type: object
      properties:
        id:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
        ownerId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174001
        make:
          type: string
          example: Toyota
        model:
          type: string
          example: Camry
        year:
          type: number
          example: 2022
        vin:
          type: string
          example: 1HGBH41JXMN109186
        licensePlate:
          type: string
          nullable: true
          example: ABC123
        mileage:
          type: number
          nullable: true
          example: 45000
        imageUrls:
          example:
            - https://example.com/image1.jpg
          type: array
          items:
            type: string
        createdAt:
          format: date-time
          type: string
        updatedAt:
          format: date-time
          type: string
      required:
        - id
        - ownerId
        - make
        - model
        - year
        - vin
        - createdAt
        - updatedAt
    CreateVehicleDto:
      type: object
      properties:
        make:
          type: string
        model:
          type: string
        year:
          type: number
          minimum: 1900
        vin:
          type: string
        licensePlate:
          type: string
        color:
          type: string
        mileage:
          type: number
          minimum: 0
      required:
        - make
        - model
        - year
    UpdateVehicleDto:
      type: object
      properties:
        licensePlate:
          type: string
        color:
          type: string
        mileage:
          type: number
          minimum: 0
    UpdateMileageDto:
      type: object
      properties:
        mileage:
          type: number
          minimum: 0
          description: Current mileage in kilometers
          example: 50000
      required:
        - mileage
    RequestResponseDto:
      type: object
      properties:
        id:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
        ownerId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174001
        vehicleId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174002
        serviceType:
          type: string
          example: oil_change
        description:
          type: string
          example: Need oil change and filter replacement
        urgency:
          type: string
          enum:
            - low
            - medium
            - high
            - urgent
          example: medium
        preferredLocation:
          type: string
          nullable: true
          example: 123 Main St, City, State 12345
        preferredDate:
          format: date-time
          type: string
          nullable: true
        status:
          enum:
            - open
            - quoted
            - accepted
            - in_progress
            - completed
            - cancelled
          type: string
          example: open
        imageUrls:
          example:
            - https://example.com/image1.jpg
          type: array
          items:
            type: string
        createdAt:
          format: date-time
          type: string
        updatedAt:
          format: date-time
          type: string
      required:
        - id
        - ownerId
        - vehicleId
        - serviceType
        - description
        - urgency
        - status
        - createdAt
        - updatedAt
    CreateRequestDto:
      type: object
      properties:
        vehicleId:
          type: string
          format: uuid
          description: ID of the vehicle (optional - can create inline)
        make:
          type: string
          description: Vehicle make (required if vehicleId not provided)
        model:
          type: string
          description: Vehicle model (required if vehicleId not provided)
        year:
          type: number
          minimum: 1900
          maximum: 2027
          description: Vehicle year (required if vehicleId not provided)
        title:
          type: string
          description: Title of the request
        description:
          type: string
          description: Detailed description of the issue
        urgency:
          enum: &ref_19
            - low
            - medium
            - high
            - urgent
          type: string
          description: Urgency level
      required:
        - title
        - description
        - urgency
    UpdateRequestDto:
      type: object
      properties:
        vehicleId:
          type: string
          format: uuid
          description: ID of the vehicle (optional - can create inline)
        make:
          type: string
          description: Vehicle make (required if vehicleId not provided)
        model:
          type: string
          description: Vehicle model (required if vehicleId not provided)
        year:
          type: number
          minimum: 1900
          maximum: 2027
          description: Vehicle year (required if vehicleId not provided)
        title:
          type: string
          description: Title of the request
        description:
          type: string
          description: Detailed description of the issue
        urgency:
          enum: *ref_19
          type: string
          description: Urgency level
    QuoteEntity:
      type: object
      properties:
        id:
          type: string
        requestId:
          type: string
        providerId:
          type: string
        amount:
          type: string
        laborCost:
          type: string
          nullable: true
        partsCost:
          type: string
          nullable: true
        estimatedDuration:
          type: string
        description:
          type: string
          nullable: true
        includesWarranty:
          type: boolean
        status:
          type: string
        createdAt:
          format: date-time
          type: string
        updatedAt:
          format: date-time
          type: string
        provider:
          type: object
      required:
        - id
        - requestId
        - providerId
        - amount
        - estimatedDuration
        - includesWarranty
        - status
        - createdAt
        - updatedAt
    AddQuotePartDto:
      type: object
      properties:
        partId:
          type: string
          format: uuid
          description: Part inventory ID (if from inventory)
        name:
          type: string
          description: Part name
        condition:
          type: string
          enum:
            - OEM
            - AFTERMARKET
            - USED
          description: Part condition
        price:
          type: number
          minimum: 0
          description: Part price
        quantity:
          type: number
          default: 1
          minimum: 1
          description: Quantity
        notes:
          type: string
          description: Additional notes
      required:
        - name
        - condition
        - price
        - quantity
    CreateQuoteDto:
      type: object
      properties:
        requestId:
          type: string
          format: uuid
          description: UUID of the service request
        amount:
          type: string
          pattern: /^\d+(\.\d{1,2})?$/
          description: Total quote amount
          example: '150.00'
        laborCost:
          type: string
          pattern: /^\d+(\.\d{1,2})?$/
          description: Labor cost portion
          example: '100.00'
        partsCost:
          type: string
          pattern: /^\d+(\.\d{1,2})?$/
          description: Parts cost portion
          example: '50.00'
        estimatedDuration:
          type: string
          description: Estimated time to complete
          example: 2 hours
        description:
          type: string
          description: Detailed quote description
        includesWarranty:
          type: boolean
          description: Whether warranty is included
          default: false
        parts:
          description: Parts included in the quote
          type: array
          items:
            $ref: '#/components/schemas/AddQuotePartDto'
      required:
        - requestId
        - amount
        - estimatedDuration
    JobResponseDto:
      type: object
      properties:
        id:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
        requestId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174001
        ownerId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174002
        ownerName:
          type: string
          example: John Doe
        providerId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174003
        providerName:
          type: string
          example: Jane Smith Auto Service
        quoteId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174004
        agreedPrice:
          type: number
          example: 150
        description:
          type: string
          example: Oil change and filter replacement
        status:
          enum:
            - pending
            - pending_confirmation
            - in_progress
            - completed
            - cancelled
          type: string
          example: pending
        scheduledDate:
          format: date-time
          type: string
          nullable: true
        completedAt:
          format: date-time
          type: string
          nullable: true
        createdAt:
          format: date-time
          type: string
        updatedAt:
          format: date-time
          type: string
      required:
        - id
        - requestId
        - ownerId
        - ownerName
        - providerId
        - providerName
        - quoteId
        - agreedPrice
        - description
        - status
        - createdAt
        - updatedAt
    UpdateJobStatusDto:
      type: object
      properties:
        status:
          enum:
            - pending
            - pending_confirmation
            - in_progress
            - completed
            - cancelled
          type: string
          description: The new status of the job
      required:
        - status
    UpdateProviderProfileDto:
      type: object
      properties:
        businessName:
          type: string
          example: Joe's Auto Repair
        serviceTypes:
          example:
            - oil_change
            - brakes
            - tire_service
          type: array
          items:
            type: string
        city:
          type: string
          example: Toronto
        state:
          type: string
          example: 'ON'
        shopCity:
          type: string
          example: Toronto
        shopState:
          type: string
          example: 'ON'
        serviceRadius:
          type: number
          minimum: 1
          example: 25
          description: Service radius in kilometers
    CreateMaintenanceRecordDto:
      type: object
      properties:
        serviceType:
          type: string
          description: Type of service performed
          example: Oil Change
        serviceDate:
          type: string
          description: Date when service was performed
          example: '2026-01-04'
        mileage:
          type: number
          minimum: 1
          description: Mileage at time of service (km)
          example: 50000
        cost:
          type: number
          description: Cost of service
          example: 89.99
        notes:
          type: string
          description: Additional notes about the service
        performedBy:
          type: string
          description: Name of shop or mechanic who performed service
      required:
        - serviceType
        - serviceDate
    CreateMessageDto:
      type: object
      properties:
        jobId:
          type: string
          format: uuid
          description: Job ID for the conversation
          example: 123e4567-e89b-12d3-a456-426614174000
        content:
          type: string
          description: Message content
          example: Hi, what time works best for you tomorrow?
      required:
        - jobId
        - content
    CreatePartDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the part
          example: Brake Pads
        category:
          type: string
          description: Part category
          example: brakes
        condition:
          type: string
          description: Condition of the part
          enum:
            - OEM
            - AFTERMARKET
            - USED
          example: AFTERMARKET
        price:
          type: number
          minimum: 0
          description: Price of the part
          example: 49.99
        notes:
          type: string
          description: Additional notes (e.g., fits 2011 Accord 2.4L)
      required:
        - name
        - condition
        - price
